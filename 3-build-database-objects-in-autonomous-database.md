# Module 3: Build Database Objects in Autonomous Database

## Introduction

In this module, you will create database objects using Quick SQL and then view the objects in SQL Developer Web. Then you will then use SQL Developer Web to create an additional table and view all the database objects as a data model.

***To log issues***, click here to go to the [github oracle](https://github.com/oracle/learning-library/issues/new) repository issue submission form.

## Module 3 Objectives

- Create database objects using Quick SQL
- View database objects in SQL Developer Web
- View database objects as a data model
- Create a new table and add it to the data model

## Parts

### **Part 1:** Create database objects using Quick SQL

1. Select **SQL Workshop**, then select **SQL Scripts**.

   ![](images/3/navigate-to-sql-scripts.png)

2. Click **Quick SQL**.

   ![](images/3/sql-scripts-quick-sql.png)

3. Copy the following SQL shorthand into the left pane Quick SQL window area.

    ```
    team_members /insert 10
      username /nn /upper
      full name
      email /nn
      phone_number
      profile
      photo file
    projects /insert 20
      name /nn
      project_lead /nn /references team_members
      budget num
      status vc30 /nn /check ASSIGNED, IN-PROGRESS, COMPLETED
      completed_date
      description
      milestones /insert 30
        name /nn
        due_date /nn
        description
      tasks /insert 100
        name /nn
        assignee /nn /references team_members
        milestone_id /references milestones
        start_date /nn
        end_date
        cost num
        description
        is_complete_yn /check Y, N
    view project_tasks projects tasks
    ```

4. Review the code and click **Generate SQL**.

   ![](images/3/generate-sql.png)

5. Note the SQL that is generated by default, then click **Settings** to make some changes to the resulting code.

   ![](images/3/sql-settings.png)

6. Change the following settings and click **Save Changes**.

   -  Object Prefix, enter **HOL**
   -  On Delete, select **Restrict**
   -  Primary Keys, select **12c Identity Data Types**
   -  Date Data Type, select **TIMESTAMP WITH LOCAL TIME ZONE**
   -  Include, check **Audit Columns** and **Row Version Number**

   ![](images/3/settings-1.png)

   ![](images/3/settings-2.png)

7. Click **Save SQL Script**.

   ![](images/3/save-sql-script.png)

8. Enter **HOL** for Script Name and click **Save Script**.

   ![](images/3/script-name.png)

9. Click **Review and Run**.

   ![](images/3/save-sql-script.png)

10. Click **Run**.

    ![](images/3/script-editor-run.png)

11. Click **Run Now**.

    ![](images/3/run-now.png)

12. The script ran and you now see the log. Scroll to the bottom to see the summary.

    ![](images/3/script-log-1.png)

    ![](images/3/script-log-2.png)

13. You can view the database objects that were created and view the data that was loaded. Select **SQL Workshop** and select **Object Browser**.

    ![](images/3/navigate-to-object-browser.png)

14. Search for **HOL** to see the tables you created. Select **HOL_PROJECTS**. Review the columns in the table.

    ![](images/3/hol-projects.png)

15. Click the **Data** tab to see the data that was loaded.

    ![](images/3/hol-projects-data.png)

### **Part 2:** View database objects in SQL Developer Web

In this part, you will access SQL Developer Web and review the current objects and make some modifications to the data model.

1. Switch to the ATP instance Service Console in your browser. Click the **Development** option in the menu on the left, then select **SQL Developer Web**.

   ![](images/3/navigate-to-sql-dev-web.png)

2. Log in to SQL Developer Web as the **admin** user.

   ![](images/3/login-as-admin.png)

3. You created your database objects in the DEMO schema so you will need to enable SQL Developer Web access for that schema. Use the **Worksheet** to execute the following code:

   ```sql
   begin
 
     ords_admin.enable_schema(
       p_enabled => true,
       p_schema => 'DEMO',
       p_url_mapping_type => 'BASE_PATH',
       p_url_mapping_pattern => 'demo',
       p_auto_rest_auth => true
     );
 
     commit;
     
   end;
   ```

4. Change the URL by replacing **admin** with the value passed to the **p_url_mapping_pattern** parameter in the script above.

   ![](images/3/url-before.png)

5. Log in as the **demo** user.

   ![](images/3/url-after.png)

6. The Worksheet tab is displayed. Close the help popup.

   ![](images/3/worksheet-tab.png)

7. To see all the tables you added previously, in the search area, enter **HOL** and click the refresh button.

   ![](images/3/filter-objects-hol.png)

8. All the tables you created are displayed. Expand the **HOL_PROJECTS** table to see the columns.

   ![](images/3/hol-projects-columns.png)

9. Enter the following SQL in the right area and click the "run" icon to see the data in the table.

   ```sql
   select * from hol_projects;
   ```

   The data should be displayed in the Query Result tab at the bottom.

   ![](images/3/query-results.png)

### **Part 3:** View database objects as a data model

1. Let's view the tables in a data model diagram. Click the **Data Model** tab. Close the Help popup.

   ![](images/3/data-modeler.png)

2. Search for **HOL** again and click **Refresh**. Then drag the **HOL_MILESTONES** table to the right side of the window.

   ![](images/3/drop-hol-milestones.png)

3. Drag the other three tables to the right. Note that the foreign keys are detected and drawn on the data model.

   ![](images/3/drop-remaining-tables.png)

4. Click the **HOL_PROJECTS** table in the diagram. Note that the detail is displayed in the right navigator.

   ![](images/3/hol-projects-details.png)

### **Part 4:** Create a new table and add it to the data model

1. You want to create a new table. In the Navigator, click the **'+'** icon.

   ![](images/3/create-new-table.png)

2. Enter **HOL_TODOS** for the table name and click the **'+'** to create a new column.

   ![](images/3/table-properties.png)

3. Select the new column **NEW_COLUMN_1** and in the area at the bottom of the dialog, enter **id** for Name and select **NUMBER** for Data Type. Also select the checkbox for **PK** to make it the primary key for this new table. Click **'+'** to create another column.

   ![](images/3/new-column-1.png)

4. Create the following columns and then click **Apply**.
**NAME - VARCHAR(50)** (Note, just change the number 20 to 50)
**STATUS = VARCHAR(20)**

   ![](images/3/additional-new-columns.png)

5. The script is generated and is executed. Click **Close**.

   ![](images/3/new-table-ddl.png)

6. In the Navigator, click the Refresh icon to see the new HOL_TODOS table.

   ![](images/3/new-hol-todos-table.png)

7. You want to be able to assign a team member to a todo so you want to create a new column called TEAM_MEMBER_ID and create a foreign key to the HOL_TEAM_MEMBERS table. Right-click on the **HOL_TODOS** table and select **Edit...**.

   ![](images/3/edit-hol-todos.png)

8. Add a new column called **TEAM_MEMBER_ID** and click **Apply**.

   ![](images/3/add-column-to-hol-todos.png)

9. The script to create the new column ran successfully. 

   ![](images/3/hol-todos-altered.png)

10. Click the **Foreign Key** option on the left side of the dialog.

   ![](images/3/hol-todos-fks.png)

-  Click the '+' to create a new foreign key. Select it in the list and change the name to TEAM_MEMBER_ID. 

   ![](images/3/hol-todos-new-fk.png)

11. The script to create the new column ran successfully. Click the **Foreign Key** option on the left side of the dialog. Select the **HOL_TEAM_MEMBERS** table and select the **HOL_TEAM_MEMBERS_ID_PK** constraint. On the right side, select **TEAM_MEMBER_ID** for local column and click **Apply**.

    ![](images/3/output-from-new-fk.png)

12. The script to create the foreign key ran successfully. Click **Close**.

    ![](images/3/output-from-new-fk.png)

13. Drag the new HOL_TODOS table from the Navigator to the Diagram. You notice that the new foreign key is displayed between HOL_TEAM_MEMBERS and HOL_TODOS.

    ![](images/3/final-erd.png)
